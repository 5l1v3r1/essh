<!DOCTYPE html>
<html lang="ja">

<head>
  <title>ホスト | ドキュメント | Essh - Extended ssh command</title>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">

  <link rel="shortcut icon" href="/essh/images/favicon.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/styles/agate.min.css">
<link rel="stylesheet" href="/essh/asciinema/asciinema-player.css">
<link rel="stylesheet" href="/essh/css/style.css">

</head>

<body class="layout-docs-single">
  <nav id="mainNav" class="navbar navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                  <span class="sr-only">Toggle navigation</span> Menu <i class="fa fa-bars"></i>
              </button>
      <a class="navbar-brand" href="/essh/">Essh</a>
    </div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
      <ul class="nav navbar-nav navbar-right">
        <li>
          <a class="" href="/essh/intro/en/index.html">Intro</a>
        </li>
        <li>
          <a class="" href="/essh/docs/en/index.html">Docs</a>
        </li>
        <li>
          <a class="" href="https://github.com/kohkimakimoto/essh">Github</a>
        </li>
        <li>
          <a class="" href="https://github.com/kohkimakimoto/essh/releases/latest">Download</a>
        </li>

      </ul>
    </div>
  </div>
</nav>

  <section class="single content-wrapper">
    <div class="container">
      <div class="row">
        <div class="col-sm-9 col-sm-push-3">
          <div class="pull-right lang-list change-lang">
            <span>言語の選択:</span>
            <ul>
              <li><a href="/essh/docs/en/hosts.html" class="">英語</a></li>
              <li><a href="/essh/docs/ja/hosts.html" class="disabled">日本語</a></li>
            </ul>
            </div>
          <section class="main-content">
            

<h1 id="ホスト">ホスト</h1>

<p>Esshのホストとは、あなたが管理するSSHサーバです。ホスト設定を使用して、Esshは動的にSSHコンフィグを生成し、フック機能を提供し、タグでホストを分類します。</p>

<h2 id="例">例</h2>

<pre><code class="language-lua">host &quot;web01.localhost&quot; {
    -- SSH config properties.
    HostName = &quot;192.168.0.11&quot;,
    Port = &quot;22&quot;,
    User = &quot;kohkimakimoto&quot;,
    -- ... And you can use all ssh_config options. see ssh_config(5)
    
    -- Essh config properties.
    description = &quot;web01 development server&quot;,
    
    hidden = false,
    
    props = {
        aaa = &quot;bbb&quot;,
        ccc = &quot;ddd&quot;,
    },
    
    tags = {
        &quot;web&quot;,
        &quot;development&quot;,
    },
    
    hooks_before_connect = {
        &quot;echo bar&quot;,
    },
}
</code></pre>

<p>ホストは2種類のプロパティで構成されています。 <strong>SSHコンフィグプロパティ</strong> と <strong>Esshコンフィグプロパティ</strong> です。</p>

<h2 id="sshコンフィグプロパティ">SSHコンフィグプロパティ</h2>

<p>SSHコンフィグプロパティは、最初の文字を大文字にする必要があります。
例えば​​<code>HostName</code>や<code>Port</code>です。 このタイプのプロパティは<strong>ssh_config</strong>を生成するために使用されます。このプロパティはすべてのsshオプションを使用できます。ssh_config(5)を参照してください。</p>

<h2 id="esshコンフィグプロパティ">Esshコンフィグプロパティ</h2>

<p>Esshコンフィグプロパティは、最初の文字を小文字にする必要があります。
これらはssh_configではなくEsshの機能の特殊な目的に使用されます。</p>

<p>このタイプのプロパティのすべてを以下に記載します。</p>

<ul>
<li><p><code>description</code> (string): ホストの説明。これは、ホストのリストとzsh補完に表示するために使用されます。</p></li>

<li><p><code>hidden</code> (boolean): trueに設定すると、zsh補完はこのホストを表示しません。</p></li>

<li><p><code>hooks_before_connect</code> (table): 接続する前に発火するフック。これはローカルで実行されます。フックはLuaテーブルとして定義されています。このテーブルは、複数の関数または文字列を持つことができます。例を参照してください:</p>

<pre><code class="language-lua">hooks_before_connect = {
    -- function
    function()
        print(&quot;foo&quot;)
    end,

    -- string (commands)
    &quot;echo bar&quot;,

    -- If the function returns a string, Essh run the string as a command.
    function()
        return &quot;echo foobar&quot;
    end,
}
</code></pre>

<p>Lua関数で実装されたすべてのフック(<code>hooks_after_connect</code>, <code>hooks_after_disconnect</code>も含む)はローカルで実行されます。</p>

<p>すべてのフック(<code>hooks_after_connect</code>, <code>hooks_after_disconnect</code>も含む)は、単にsshでログインしたときにのみ発火します。フックはタスクや<code>--exec</code>オプションで発火しません。</p></li>

<li><p><code>hooks_after_connect</code> (table): 接続後に発火するフック。これはリモートサーバで実行されます。</p></li>

<li><p><code>hooks_after_disconnect</code> (table): 切断後に発火するフック。これはローカルで実行されます。</p></li>

<li><p><code>tags</code> (array table): タグはホストを分類します。</p>

<pre><code class="language-lua">tags = {
    &quot;web&quot;,
    &quot;production&quot;,
}
</code></pre>

<p>タグをホスト名と重複させることはできません。</p></li>

<li><p><code>props</code> (table): Propsはホストがタスクで使用されるときの環境変数を<code>ESSH_HOST_PROPS_{KEY}</code>で設定します。テーブルキーは大文字に変更されます。</p>

<pre><code class="language-lua">props = {
    foo = &quot;bar&quot;,
}

-- ESSH_HOST_PROPS_FOO=bar
</code></pre></li>
</ul>

          </section>
        </div>
        <div class="col-sm-3 col-sm-pull-9">
          <section class="side-menu">
<ul>
<li><a href="index.html">ドキュメント</a></li>
<li><a href="configuration-files.html">設定ファイル</a></li>
<li><a href="hosts.html">ホスト</a></li>
<li><a href="tasks.html">タスク</a></li>
<li><a href="lua-vm.html">Lua VM</a></li>
<li><a href="cli-options.html">CLIオプション</a></li>
<li><a href="drivers.html">ドライバ</a></li>
<li><a href="groups.html">グループ</a></li>
<li><a href="integrating-other-tools.html">他のツールとの統合</a></li>
</ul>
</section>

        </div>

      </div>
    </div>
  </section>
  <footer>
  <div class="container">
    <p>Copyright (c) 2016 Kohki Makimoto</p>
    <ul class="list-inline">
      <li>
        <a href="https://github.com/kohkimakimoto/essh">Github</a>
      </li>
      <li>
        <a href="https://github.com/kohkimakimoto/essh/issues">Issues</a>
      </li>
      <li>
        <a href="https://github.com/kohkimakimoto/essh/releases">Releases</a>
      </li>
    </ul>
    <p>HTML template is <a href="https://github.com/BlackrockDigital/startbootstrap-new-age">startbootstrap-new-age</a> - Copyright 2013-2016 Blackrock Digital LLC.</p>
    <p>I use “Google Analytics” to collect information about use of this site.</p>
  </div>
</footer>

  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/languages/lua.min.js"></script>
<script type="text/javascript" src="/essh/asciinema/asciinema-player.js"></script>
<script type="text/javascript" src="/essh/js/bundle.js"></script>



<script>hljs.initHighlightingOnLoad();</script>


</body>

</html>
